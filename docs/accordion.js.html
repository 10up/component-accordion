<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: accordion.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: accordion.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

export default class Accordion {

	/**
	 * Create an Accordion instance.
	 * @module @10up/component-accordion
	 * @param {string} element Element selector for accordion container.
	 * @param {object} options Object of optional callbacks.
	 */
	constructor( element, options = {} ) {

		// Defaults
		const defaults = {

			// Event callbacks
			onCreate: null,
			onOpen: null,
			onClose: null,
			onToggle: null,
		};

		if ( ! element || 'string' !== typeof element ) {
			console.error( '10up Accordion: No target supplied. A valid target (accordion area) must be used.' ); // eslint-disable-line
			return;
		}

		// Accordion Containers
		this.$accordions = document.querySelectorAll( element );

		// Bail out if there's no accordion.
		if ( ! this.$accordions  ) {
			console.error( '10up Accordion: Target not found. A valid target (accordion area) must be used.'  ); // eslint-disable-line
			return;
		}

		document.documentElement.classList.add( 'js' );

		// Settings
		this.settings = Object.assign( {}, defaults, options );

		this.$accordions.forEach( ( accordionArea, index ) => {
			this.setupAccordion( accordionArea, index );
		} );

		// Do any callbacks, if assigned.
		if ( this.settings.onCreate &amp;&amp; 'function' === typeof this.settings.onCreate ) {
			this.settings.onCreate.call();
		}
	}

	/**
	 * Initialize a given accordion area
	 * Configure accordion properties and set AIRA attributes.
	 *
	 * @param   {element} accordionArea      The accordionArea to scope changes
	 * @param   {number}  accordionAreaIndex The index of the accordionArea
	 * @returns {void}
	 */
	setupAccordion( accordionArea, accordionAreaIndex ) {

		let accordionLinks = accordionArea.querySelectorAll( '.accordion-header' );
		let accordionContent = accordionArea.querySelectorAll( '.accordion-content' );

		// Set ARIA attributes for accordion links
		accordionLinks.forEach( ( accordionLink, index ) => {
			accordionLink.setAttribute( 'id', `tab${accordionAreaIndex}-${index}` );
			accordionLink.setAttribute( 'aria-selected', 'false' );
			accordionLink.setAttribute( 'aria-expanded', 'false' );
			accordionLink.setAttribute( 'aria-controls', `panel${accordionAreaIndex}-${index}` );
			accordionLink.setAttribute( 'role', 'tab' );

			// Handle click event to toggle accordion items
			accordionLink.addEventListener( 'click', () => {
				event.preventDefault();
				this.toggleAccordionItem( event );
			} );
		} );

		// Set ARIA attributes for accordion content areas
		accordionContent.forEach( ( accordionContent, index ) => {
			accordionContent.setAttribute( 'id', `panel${accordionAreaIndex}-${index}` );
			accordionContent.setAttribute( 'aria-hidden', 'true' );
			accordionContent.setAttribute( 'aria-labelledby', `tab${accordionAreaIndex}-${index}` );
			accordionContent.setAttribute( 'role', 'tabpanel' );
		} );
	}

	/**
	 * Toggles a given accordion item
	 * Add or remove necessary CSS classes and toggle AIRA attributes.

	 * @param   {object} event The accordion click event
	 * @returns {void}
	 */
	toggleAccordionItem( event ) {

		let accordionLink = event.target;
		let accordionContent = accordionLink.nextElementSibling;
		let accordionHeading = accordionContent.querySelector( '.accordion-label' );

		// Toggle active class on accordion link and content
		accordionLink.classList.toggle( 'is-active' );
		accordionContent.classList.toggle( 'is-active' );

		// Set focus on the accordion heading
		accordionHeading.setAttribute( 'tabindex', -1 );
		accordionHeading.focus();

		if ( accordionContent.classList.contains( 'is-active' ) ) {
			// Show accordion item
			accordionLink.setAttribute( 'aria-selected', 'true' );
			accordionLink.setAttribute( 'aria-expanded', 'true' );
			accordionContent.setAttribute( 'aria-hidden', 'false' );

			// Custom accordion open callback
			if ( this.settings.onOpen &amp;&amp; 'function' === typeof this.settings.onOpen ) {
				this.settings.onOpen.call();
			}
		} else {
			// Hide accordion item
			accordionLink.setAttribute( 'aria-selected', 'false' );
			accordionLink.setAttribute( 'aria-expanded', 'false' );
			accordionContent.setAttribute( 'aria-hidden', 'true' );

			// Custom accordion close callback
			if ( this.settings.onClose &amp;&amp; 'function' === typeof this.settings.onClose ) {
				this.settings.onClose.call();
			}
		}

		// Custom accordion toggle callback
		if ( this.settings.onToggle &amp;&amp; 'function' === typeof this.settings.onToggle ) {
			this.settings.onToggle.call();
		}
	}
}

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-@10up_component-accordion.html">@10up/component-accordion</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Feb 25 2019 16:54:40 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
